// features/buyer/presentation/controllers/chat_controller.dart
import 'package:get/get.dart';

class ChatController extends GetxController {
  final RxList<Map<String, dynamic>> messages = <Map<String, dynamic>>[].obs;

  // Mock ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏ä‡∏ó‡πÄ‡∏Å‡πà‡∏≤ (hardcode ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤)
  @override
  void onInit() {
    super.onInit();
    // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡πà‡∏≤ (‡∏™‡∏°‡∏°‡∏ï‡∏¥‡πÄ‡∏Ñ‡∏¢‡∏Ñ‡∏∏‡∏¢‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô)
    messages.addAll([
      {
        'text': '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤ DTG ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∑‡∏î 100 ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö',
        'isMe': false, // ‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô
        'time': '10:15',
      },
      {
        'text': '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏£‡∏≤‡∏Ñ‡∏≤ DTG 100 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà 95 ‡∏ö‡∏≤‡∏ó/‡∏ï‡∏±‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö (‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á)',
        'isMe': true, // ‡∏à‡∏≤‡∏Å‡πÄ‡∏£‡∏≤
        'time': '10:18',
      },
    ]);
  }

  void sendMessage(String text) {
    if (text.trim().isEmpty) return;

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ (‡∏ù‡∏±‡πà‡∏á‡∏Ç‡∏ß‡∏≤)
    messages.add({
      'text': text.trim(),
      'isMe': true,
      'time': '‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ',
    });

    // Mock ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á 2-3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    Future.delayed(const Duration(seconds: 2), () {
      messages.add({
        'text': '‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö üòä',
        'isMe': false,
        'time': '‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ',
      });
    });
  }
}